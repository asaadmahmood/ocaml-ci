<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta
    http-equiv="X-UA-Compatible"
    content="IE=edge"
  />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>OCaml</title>
  <script
    defer
    src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
  ></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="./css/tailwind.css"
  />
</head>

<body class="">
  <header class="h-20 flex items-center border-b border-gray-200 bg-white sticky top-0 z-50">
    <div class="container-fluid flex justify-between items-center">
      <a href="index.html">
        <img
          src="images/logo.svg"
          width="116px"
          height="32px"
        />
      </a>
      <a href="index.html">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="#667085"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
          />
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
          />
        </svg>
      </a>
    </div>
  </header>
  <div class="container-fluid py-12" x-data='linkTooltip'>
    <div class="flex items-center mb-7 text-sm font-medium space-x-2">
      <a href="index.html">Organisations</a>
      <div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="#D0D5DD"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </div>
      <a href="organization.html">MisterDA</a>
      <div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="#D0D5DD"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </div>
      <a href="repo-branch.html">ocaml-ci</a>
      <div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="#D0D5DD"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </div>
      <a
        href="#"
        class="text-gray-700"
      >e92bce (master)</a>
    </div>
    <div class="justify-between items-center flex">
      <div class="flex flex-col space-y-6">
        <div class="flex items-center space-x-4">
          <div class="icon-status icon-status--failed">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-3 w-3"
              viewBox="0 0 20 20"
              fill="#D92D20"
            >
              <path
                fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </div>
          <div class="flex flex-col space-y-1">
            <div class="flex items-baseline space-x-2">
              <h1 class='text-xl'>Step 12821-3</h1>
              <div class="text-sm font-normal text-gray-500">
                OS: debian-11 - Compiler: 4.14+flambda - Opam: 2.1
              </div>
            </div>

            <div class="text-gray-500">
              <div class="flex text-sm space-x-2">
                <div>Created today at 12:45 (UTC)</div>
                <div>-</div>
                <div>10m 5s in queue</div>
                <div>-</div>
                <div>Failed today at 12:51 (UTC)</div>
                <div>-</div>
                <div>Git SHA of e92bce</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="flex items-center justify-between space-x-4">
        <div class='text-sm'>Failed in 1m 18s</div>
        <button class="btn btn-primary">
          <div>Rebuild</div>
        </button>
      </div>
    </div>
    <div
      class="container-fluid mt-8 flex flex-col "
      x-data="{ logs: true, artefacts: false, codeCoverage: false, codeCopied: false, linkCopied: false}"
    >
      <button
        class='tooltip'
        x-show='linkTooltipVisible'
        x-transition
        x-ref="linkTooltipRef"
        @click.outside='linkTooltipVisible = false'
        @click='linkCopied = true, linkTooltipVisible = false'
        onclick="wrapSelectedText();"
      >
        Copy link
        <div class="tooltip-arrow"></div>
      </button>

      <!-- Code Copied Notification -->
      <div
        class='notification'
        x-show='codeCopied'
        x-transition
      >
        <div class="flex items-center space-x-2">
          <div class="icon-status icon-status--success">
            <svg
              class="h-4 w-4"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="#12B76A"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </div>
          <div>Code copied successfully</div>
        </div>
        <button
          class='icon-button'
          @click='codeCopied = false'
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2.5"
            stroke="currentColor"
            class="w-4 h-4"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4.5 19.5l15-15m-15 0l15 15"
            />
          </svg>
        </button>
      </div>

      <!-- Link Copied Notification -->
      <div
        class='notification'
        x-show='linkCopied'
        x-transition
      >
        <div class="flex items-center space-x-2">
          <div class="icon-status icon-status--success">
            <svg
              class="h-4 w-4"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="#12B76A"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </div>
          <div>Link copied successfully</div>
        </div>
        <button
          class='icon-button'
          @click='linkCopied = false'
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2.5"
            stroke="currentColor"
            class="w-4 h-4"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4.5 19.5l15-15m-15 0l15 15"
            />
          </svg>
        </button>
      </div>


      <div class="flex space-x-6 border-b border-gray-200 mb-6 text-sm ">
        <a
          href="#"
          class="font-medium pb-2"
          @click="artefacts =false; codeCoverage = false; logs = true; "
          :class="{ 'text-[#175CD3] border-b-2 border-b-[#175CD3]': logs }"
        >Logs</a>
        <a
          href="#"
          class="flex space-x-2 pb-3 items-center "
          :class="{ 'text-[#175CD3] border-b-2 border-b-[#175CD3]': artefacts }"
          @click="artefacts =true; codeCoverage = false; logs = false; "
        >
          <div>Artefacts</div>
          <div class="badge badge-gray">2</div>
        </a>
        <a
          href="
            #"
          class="pb-2"
          @click="codeCoverage = true; logs = false; artefacts =false"
          :class="{ 'text-[#175CD3] border-b-2 border-b-[#175CD3]': codeCoverage }"
        >Code Coverage
        </a>
      </div>
      <div
        x-show="logs"
        x-data="{stepsToRepro: true}"
      >
        <div class='shadow-sm rounded-lg overflow-hidden border border-gray-200 divide-x divide-gray-200'>
          <div class="flex items-center justify-between px-4 py-3 bg-white">
            <div
              @click="stepsToRepro = !stepsToRepro"
              class="bg-gray-50  text-gray-900 text-base font-medium border-b-none border-gray-200 flex items-center space-x-3 flex-1 cursor-pointer"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 rotate-180"
                :class="{ 'rotate-180': stepsToRepro == 1 }"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
              <div>Steps to Reproduce</div>
            </div>
            <button
              @click='codeCopied = true'
              class="btn btn-sm btn-default"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                />
              </svg>
              <div>Copy code</div>
            </button>
          </div>
          <div
            class="flex prose relative overflow-hidden transition-all max-h-0 duration-700"
            x-ref="container1"
            x-bind:style="stepsToRepro == 1 ? 'max-height: ' + $refs.container1.scrollHeight + 'px' : ''"
          >
            <div class="bg-gray-800 px-6 py-3 rounded-lg w-14 rounded-r-none rounded-t-none text-gray-400">
              <code>
                1
                2
                3
                4
              </code>
            </div>
            <div class="bg-gray-900 px-6 py-3 rounded-lg rounded-l-none text-gray-300 w-full rounded-t-none"><code>git clone --recursive "https://github.com/ocaml/merlin.git" -b "master" && cd "merlin" && git reset --hard be753d94
            cat > Dockerfile <<'END-OF-DOCKERFILE'</code></div>
          </div>
        </div>


        <div class="flex prose overflow-hidden mt-6">
          <div class="bg-gray-800 px-6 py-3 rounded-lg w-14 rounded-r-none text-gray-400"><code>1
          2
          3
          4
          5
          6
          7
          8
          9
          10
          11
          12
          13
          14
          15
          16
          17
          18
          19
          20
          21
  </code></div>
          <div class='flex overflow-auto rounded-r rounded-b'>
<pre
  class="bg-gray-900 px-6 py-3 rounded-lg rounded-l-none text-gray-300 flex-1"
  x-on:click='showLinkTooltip, $refs.linkTooltipRef.style.left = `${$event.pageX-50}px`, $refs.linkTooltipRef.style.top = `${$event.pageY-50}px`'
><code>FROM ocaml/opam@sha256:4d2dfd672896a4ffd168c4b7acf39a2506f5ccf70cdbc660382ecff265faafe9
# alpine-3.14-4.14_opam-2.1
USER 1000:1000
<code class="text-blue-300">RUN sudo ln -f /usr/bin/opam-2.1 /usr/bin/opam</code>
WORKDIR /src
<code class="text-blue-300">RUN sudo chown opam /src
RUN cd ~/opam-repository && (git cat-file -e bc8df14f0d08de7b76d0d43a043cbd0c5f356dec || git fetch origin master) && git reset -q --hard bc8df14f0d08de7b76d0d43a043cbd0c5f356dec && git log --no-decorate -n1 --oneline && opam update -u
RUN mkdir -p 'ocurrent/' 'ocluster/' 'ocluster/obuilder/' 'ocluster/' 'ocaml-version/' 'ocaml-matrix/' 'ocaml-dockerfile/'</code>
<code class="text-green-300">COPY --chown=1000:1000 ocurrent/current_web.opam ocurrent/current_slack.opam ocurrent/current_rpc.opam ocurrent/current_gitlab.opam ocurrent/current_github.opam ocurrent/current_git.opam ocurrent/current_examples.opam ocurrent/current_docker.opam ocurrent/current.opam ocurrent/
COPY --chown=1000:1000 ocluster/ocluster.opam ocluster/ocluster-api.opam ocluster/
COPY --chown=1000:1000 ocluster/obuilder/obuilder.opam ocluster/obuilder/obuilder-spec.opam ocluster/obuilder/
COPY --chown=1000:1000 ocluster/current_ocluster.opam ocluster/
COPY --chown=1000:1000 ocaml-version/ocaml-version.opam ocaml-version/
COPY --chown=1000:1000 ocaml-matrix/matrix-stos.opam ocaml-matrix/matrix-server.opam ocaml-matrix/matrix-current.opam ocaml-matrix/matrix-ctos.opam ocaml-matrix/matrix-common.opam ocaml-matrix/matrix-ci-server.opam ocaml-matrix/matrix-ci-server-setup.opam ocaml-matrix/
COPY --chown=1000:1000 ocaml-dockerfile/dockerfile.opam ocaml-dockerfile/dockerfile-opam.opam ocaml-dockerfile/dockerfile-cmd.opam ocaml-dockerfile/
COPY --chown=1000:1000 ocaml-ci-web.opam ocaml-ci-solver.opam ocaml-ci-service.opam ocaml-ci-client.opam ocaml-ci-api.opam ./
RUN opam pin add -yn current_web.dev 'ocurrent/' && \
    opam pin add -yn current_slack.dev 'ocurrent/' && \
    opam pin add -yn current_rpc.dev 'ocurrent/' && \
    opam pin add -yn current_gitlab.dev 'ocurrent/' && \
    opam pin add -yn current_github.dev 'ocurrent/' && \</code></code></pre>
          </div>
        </div>
      </div>
      <div x-show="artefacts">
        Artefacts
      </div>
      <div x-show="codeCoverage">
        Code Coverage
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('linkTooltip', () => ({
            linkTooltipVisible: false,

            showLinkTooltip() {
                console.log('asd');
                var selection = window.getSelection().getRangeAt(0);
                if (selection.endOffset != selection.startOffset) {
                  this.linkTooltipVisible = true;
                }
            }
        }))
    })

    function wrapSelectedText() {
      var selection = window.getSelection().getRangeAt(0);
      var selectedText = selection.extractContents();
      console.log(selection);
      var span = document.createElement("span");
      span.style.backgroundColor = "#cc880087";
      span.appendChild(selectedText);
      selection.insertNode(span);
    }
  </script>
</body>

</html>
